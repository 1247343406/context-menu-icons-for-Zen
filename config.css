/* Here you can adjust the text alignment values to ensure that all context menu items' text alignment remains as expected across different browsers or when using other mods. */
/* Please read the description carefully and modify the values as needed until the text is correctly aligned. */
/* If the CMI is already displaying normally, then there is no need to make any changes to these settings. */
/* 你可以在这里调整文本对齐的数值，确保在不同浏览器、或使用了其他mod情况下也能按照预期那样保持所有的上下文菜单项的文本对齐 */
/* 请仔细阅读描述，按照需要修改数值，直到文本已经正确对齐 */
/* 如果CMI已经显示正常，就不要改这些东西了 */



/* 1. 校正身份容器的菜单文本 */
/* 1. Menu text for correcting the identity container */
menupopup#new-tab-button-popup,
menupopup#zenWorkspaceMoreActions menupopup {
/* 普通菜单项 & 子菜单容器，排除图标项、已勾选复选/单选、已分组和高亮项 */
> :is(menuitem, menu):not(
    .menuitem-iconic,
    .menu-iconic,

    [type="checkbox"][checked="true"],
    [type="radio"][checked="true"],

    .in-menulist,
    .in-menulist menuitem,
    .in-menulist menu,
    .unified-nav-current
  ),
/* 分组标题 */
> menucaption {
  padding-inline-start: 34px !important;  /* Modify the values here so that the menu text and icons of the identity tab remain aligned. */
}
}


/* ---------------------------
  2. Set margin rules for FluentUI and ZenUI Icon package respectively 
  Please do not change the following values at will. Please follow the instructions to operate.
  2. 分别为 FluentUI 和 ZenUI 两套图标包设置边距规则
  下面的东西别乱改，看描述
   ---------------------------*/

/* FluentUI: cmi-Switch-Icon-Package != 0 && != 2 */
@media (not (-moz-pref("cmi-Switch-Icon-Package", 0)))
  and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) {
  :root {
    /* 用于菜单内边距计算的差值（16px / 8px） */
    --menuitem-padding-extra: 16px;

    /* checkmark */
    --checkmark-width: 16px;
    --checkmark-height: 16px;

    --checkmark-margin-start: 11px;
    --checkmark-margin-start_cover: 11px;

    --checkmark-margin-end: 7px; 

    --checkmark-margin-end_cover: 11px;     /* "√"图标与菜单文本间的距离。设置为0px可以让菜单项目的文本紧跟"√"图标。调整此数值可以让其他Firefox分支浏览器中含有checkmark图标的上下文菜单获得正确的文本对齐。*/
                                            /*The distance between the "√" icon and the menu text. Setting it to 0px will make the menu item text align directly next to the "√" icon. 
                                            Adjusting this value will ensure that the context menus containing the checkmark icon in other Firefox branches have the correct text alignment. */

    --checkmark-bg-image: url("checkmark.svg");
    --checkmark-mask: none;
    --checkmark-bg-color: transparent;
    --checkmark-moz-context: fill, fill-opacity;
    --checkmark-fill: currentColor;

    /* 对含选中项时的 group / 子菜单 padding 差别 */
    --group-padding: 10px;
    --checked-padding: 6px;
    --submenu-padding: 34px;

    --submenu-padding_cover: 38px;
  }
}

/* ZenUI: cmi-Switch-Icon-Package == 2 */
@media (-moz-pref("cmi-Switch-Icon-Package", 2)) {
  :root {
    --menuitem-padding-extra: 8px;

    --checkmark-width: 16px;
    --checkmark-height: 16px;
    
    --checkmark-margin-start: calc(10px + 1px);    
    --checkmark-margin-start_cover: 5px;  

    --checkmark-margin-end: 7px;
    @media (not (-moz-pref("cmi-Switch-PC-Platform", 2))) {--checkmark-margin-end_cover: 11px;}
    @media (-moz-pref("cmi-Switch-PC-Platform", 2)) {--checkmark-margin-end_cover: 8px;}
    
    --checkmark-bg-image: none;
    /* 使用 mask + background-color 随主题变色 */
    --checkmark-mask: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M20.285 6.709l-11.39 11.39-5.18-5.18 1.414-1.414 3.766 3.766 9.976-9.976z'/></svg>") no-repeat center/contain;
    --checkmark-bg-color: currentColor;
    --checkmark-moz-context: none;
    --checkmark-fill: none;

    /* group / 子菜单 padding */
    --group-padding: calc(var(--fp-contextmenu-menuicon-margin-inline) - 8px);
    --checked-padding: 0px;

    --submenu-padding: 34px;
    --submenu-padding_cover: 38px;
  }
}